{"version":3,"sources":["Components/views/auth/Login.tsx","config.ts","Components/Services/services.ts"],"names":["Login","props","useState","email","password","isloading","errorMessage","open","state","setState","validateForm","e","preventDefault","submitForm","a","data_","username","Connector","post","response","data","setAdminUtils","console","log","status","message","onchange","target","name","value","className","onSubmit","variant","type","onChange","placeholder","size","onClick","to","root","notify","x","toast","axios","create","interceptors","request","use","config","baseURL","getToken","url","headers","error","Promise","reject"],"mappings":"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","file":"static/js/7.d32edf5d.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Col, Row, Container, Alert, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Connector from \"../../Services/services\";\nimport { setAdminUtils, setTokenUtils } from \"../../Services/helper\";\n\nconst Login = (props) => {\n  const [state, setState] = useState({\n    email: \"\",\n    password: \"\",\n    isloading: false,\n    errorMessage: \"\",\n    open: false,\n  });\n  const { email, password, errorMessage, open, isloading } = state;\n  const validateForm = (e) => {\n    e.preventDefault();\n    if (!email) {\n      return setState({\n        ...state,\n        errorMessage: \"Email address is required\",\n      });\n    }\n    if (!password) {\n      return setState({\n        ...state,\n        errorMessage: \"Password is required\",\n      });\n    }\n    submitForm();\n  };\n  const submitForm = async () => {\n    setState({\n      ...state,\n      isloading: true,\n    });\n    const data_ = {\n      username: email,\n      password,\n    };\n    try {\n      const response = await Connector.post(`/login`, data_);\n      const {\n        data: { data },\n      } = response;\n       setAdminUtils(response.data.data);\n    } catch (error) {\n      console.log(error);\n      if (error?.response?.status == 401) {\n        setState({\n          ...state,\n          errorMessage: error?.response?.message,\n          isloading: false,\n        });\n      }\n      setState({\n        ...state,\n        isloading: false,\n        errorMessage: \"failed to login\",\n      });\n    }\n  };\n  const onchange = (e) => {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value,\n      errorMessage: \"\",\n    });\n  };\n  return (\n    <>\n      <div className=\"container-fluid lgwrap\">\n        <div className=\"row justify-center\">\n          <div className=\"col-md-5 loginformbody\">\n            <div className=\"ft1\">Welcome Back!</div>\n            <div className=\"ft3\">Login to your Account</div>\n            <form className=\"form-wrapper\" onSubmit={validateForm}>\n              <div className=\"form-header\">\n                {errorMessage && (\n                  <div className=\"signinalertmssg\">\n                    <Alert variant={\"danger\"}>{errorMessage}</Alert>\n                  </div>\n                )}\n              </div>\n              <div className=\"padded-signin-wrapper\">\n                <label className=\"inputlabel\">\n                  <span className=\"rdfrmlbl\"> Email Address</span>\n                  <input\n                    type=\"text\"\n                    name=\"email\"\n                    value={email}\n                    onChange={onchange}\n                    placeholder=\"Enter your Email Address\"\n                    size={60}\n                    className=\"form-control forminput\"\n                  />\n                </label>\n                <label className=\"inputlabel\">\n                  <span className=\"rdfrmlbl\">Password</span>\n                  <input\n                    type={open ? \"text\" : \"password\"}\n                    name=\"password\"\n                    value={password}\n                    onChange={onchange}\n                    placeholder=\"Enter your Password\"\n                    size={60}\n                    className=\"form-control forminput\"\n                  />\n                </label>\n                <div className=\"text-righ\">\n                  {\" \"}\n                  <span\n                    onClick={() => {\n                      setState({\n                        ...state,\n                        open: open ? false : true,\n                      });\n                    }}\n                  >\n                    &#128065;\n                  </span>\n                </div>\n                <div className=\"forgotpassword\">\n                  <Link to=\"/forgot-password\">Forgot Password?</Link>\n                </div>\n                <div className=\"form-btn-wrapper loginbtdv\">\n                  <input\n                    className=\"signinbtn\"\n                    type=\"submit\"\n                    onSubmit={validateForm}\n                    value={isloading ? \"Logging in...\" : \"Login\"}\n                  />\n                </div>\n                <Link to=\"/register\">\n                  {/* <p className=\"signuprgqt\">_Agents other account(s)</p> */}\n                </Link>\n                <p className=\"signuprgqt1\">Â© Drug Monitoring, 2021</p>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default Login;\n","import React from \"react\";\nimport { toast } from \"react-toastify\";\n\nexport const Appcontext: any = React.createContext({\n  state: {},\n  setState: () => { },\n});\n\nexport const api = \"https://stepformbackend.herokuapp.com/\"\nexport const root = `https://medipharm-test.herokuapp.com/api`\n// http://172.105.71.75:8091/api\n\nexport const notify = (x) => {\n  toast(x);\n};","import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { deleteToken, getToken } from \"./helper\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { notify, root } from '../../config';\n\nconst logout = () => {\n  deleteToken();\n  const redirectUrl = window.location.pathname;\n  return (window.location.href = \"/login?redirect=\" + redirectUrl);\n};\n\nconst Connector = axios.create();\n\nConnector.interceptors.request.use(\n  (config) => {\n    config.baseURL = root;\n    console.log(config)\n    if(getToken()!==\"undefined\" && config.url!==(\"/login\")&& config.url!==(\"/changepassword\")){\n      config.headers[\"Authorization\"] = getToken()? `Bearer ${getToken()}`:\"\";\n    }\n    config.headers[\"Content-Type\"] = \"application/json\";\n    config.headers[\"Accept\"] = \"application/json\";\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\nConnector.interceptors.response.use(\n  (response) => {\n    console.log(response)\n    return response;\n  },\n  (error) => {\n    console.error('error_status', error?.response);\n    notify(error?.response?.data?.message)\n    if (error?.response?.status === 401 || error?.response?.status === 404) {\n      notify(\"Failed to process please try again later\")\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default Connector;"],"sourceRoot":""}